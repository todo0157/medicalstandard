# 관리자 대시보드 - 승인 기능 사용 가이드

## 📋 전체 프로세스 개요

1. **로그인** → 2. **대기 중인 신청 확인** → 3. **상세 정보 확인** → 4. **승인/거부 처리**

---

## 🔐 1단계: 로그인

### 접속 방법
1. 브라우저에서 `http://localhost:8080/admin/` 접속
2. 관리자 계정으로 로그인
   - **이메일**: `thf5662@gmail.com`
   - **비밀번호**: `qwer^^1234`

### 로그인 후
- 자동으로 **인증 신청 목록 페이지** (`dashboard.html`)로 이동합니다.

---

## 📊 2단계: 인증 신청 목록 확인

### 대시보드 화면 구성
- **상단 통계 카드**
  - 대기 중: 승인 대기 중인 신청 수
  - 승인됨: 이미 승인된 신청 수
  - 전체: 모든 신청 수

- **필터 옵션**
  - **대기 중**: 승인 대기 중인 신청만 표시 (기본값)
  - **승인됨**: 이미 승인된 신청만 표시
  - **전체**: 모든 신청 표시

- **인증 신청 카드**
  각 카드에는 다음 정보가 표시됩니다:
  - 이름
  - 이메일
  - 자격증 번호
  - 클리닉 이름
  - 신청 일시
  - 상태 배지 (대기 중 / 승인됨 / 거부됨)

### 신청 확인 방법
1. **필터를 "대기 중"으로 설정** (기본값)
2. **새로고침 버튼** 클릭하여 최신 목록 확인
3. **승인할 신청 카드를 클릭**하여 상세 페이지로 이동

---

## 🔍 3단계: 상세 정보 확인

### 상세 페이지 구성

#### 기본 정보 섹션
- **이름**: 신청자 이름
- **이메일**: 신청자 이메일
- **자격증 번호**: 한의사 자격증 번호
- **클리닉 이름**: 병원/클리닉 이름
- **상태**: 현재 인증 상태 (대기 중 / 승인됨 / 거부됨)
- **신청 일시**: 신청한 날짜와 시간

#### 이미지 확인 섹션
- **자격증 이미지**: 한의사 자격증 사진
- **신분증 이미지**: 신분증 사진

> 💡 **이미지 확대 보기**: 이미지를 클릭하면 모달 창에서 확대된 이미지를 볼 수 있습니다.

#### 처리 섹션 (대기 중 상태일 때만 표시)
- **승인 버튼**: 인증을 승인합니다
- **거부 버튼**: 인증을 거부합니다

---

## ✅ 4단계: 승인 처리

### 승인 방법

1. **"승인" 버튼 클릭**
   - 승인 확인 모달이 표시됩니다.

2. **메모 입력 (선택사항)**
   - 승인 메모를 입력할 수 있습니다.
   - 예: "자격증 확인 완료", "추가 검토 없음" 등
   - 메모는 필수가 아니므로 비워둬도 됩니다.

3. **"승인" 버튼 클릭**
   - 승인 처리가 완료됩니다.
   - 성공 메시지가 표시됩니다.
   - 상세 페이지가 자동으로 새로고침되어 상태가 "승인됨"으로 변경됩니다.

### 승인 후 결과
- 사용자의 인증 상태가 `pending` → `verified`로 변경됩니다.
- 사용자는 앱에서 자신의 인증 상태가 "승인됨"으로 표시되는 것을 확인할 수 있습니다.
- 대시보드 목록에서 해당 신청의 상태가 "승인됨"으로 표시됩니다.

---

## ❌ 거부 처리

### 거부 방법

1. **"거부" 버튼 클릭**
   - 거부 확인 모달이 표시됩니다.

2. **거부 사유 입력 (필수)**
   - 반드시 거부 사유를 입력해야 합니다.
   - 예: "자격증 번호 불일치", "이미지 불명확", "정보 부족" 등

3. **추가 메모 입력 (선택사항)**
   - 추가 메모를 입력할 수 있습니다.

4. **"거부" 버튼 클릭**
   - 거부 처리가 완료됩니다.
   - 성공 메시지가 표시됩니다.
   - 상세 페이지가 자동으로 새로고침되어 상태가 "거부됨"으로 변경됩니다.

### 거부 후 결과
- 사용자의 인증 상태가 `pending` → `none`으로 변경됩니다.
- 사용자는 앱에서 자신의 인증 상태가 "거부됨"으로 표시되는 것을 확인할 수 있습니다.
- 대시보드 목록에서 해당 신청의 상태가 "거부됨"으로 표시됩니다.

---

## 🔄 승인/거부 후 작업

### 목록으로 돌아가기
- 상세 페이지 상단의 **"목록으로"** 버튼을 클릭하면 대시보드로 돌아갑니다.
- 또는 브라우저의 뒤로가기 버튼을 사용할 수 있습니다.

### 승인된 신청 확인
1. 대시보드에서 **필터를 "승인됨"으로 변경**
2. 승인된 신청 목록을 확인할 수 있습니다.

---

## ⚠️ 주의사항

1. **이미 승인/거부된 신청**
   - 상태가 "승인됨" 또는 "거부됨"인 신청은 상세 페이지에서 승인/거부 버튼이 표시되지 않습니다.
   - 다시 처리하려면 데이터베이스를 직접 수정해야 합니다.

2. **이미지 확인**
   - 승인 전에 반드시 자격증 이미지와 신분증 이미지를 확인하세요.
   - 이미지를 클릭하여 확대하여 자세히 확인할 수 있습니다.

3. **정보 검증**
   - 자격증 번호와 클리닉 이름이 정확한지 확인하세요.
   - 필요시 추가 검증을 위해 메모를 남길 수 있습니다.

---

## 🐛 문제 해결

### 승인/거부 버튼이 보이지 않을 때
- 신청 상태가 "대기 중"인지 확인하세요.
- 이미 승인/거부된 신청은 버튼이 표시되지 않습니다.

### 승인/거부가 실패할 때
- 서버 터미널의 에러 로그를 확인하세요.
- 네트워크 연결을 확인하세요.
- 브라우저 콘솔(F12)에서 에러 메시지를 확인하세요.

### 이미지가 보이지 않을 때
- 이미지 URL이 올바른지 확인하세요.
- 서버의 이미지 파일 경로를 확인하세요.
- 브라우저 콘솔에서 이미지 로드 에러를 확인하세요.

---

## 📞 추가 도움말

문제가 발생하면 다음을 확인하세요:
- 서버가 정상적으로 실행 중인지
- 관리자 계정이 올바르게 설정되었는지 (`ADMIN_EMAILS` 환경변수)
- 데이터베이스 연결이 정상인지

