# Ver1.3.9.6 코드베이스 분석 및 개선 계획

## 📋 현재 상태 요약

### ✅ 구현 완료된 핵심 기능 (ver1.3.9.6 기준)

1. **알림 시스템 (FCM) 구현**
   - **Firebase Cloud Messaging 연동**: 백엔드와 프론트엔드 간의 실시간 푸시 알림 인프라 구축
   - **기기 토큰 관리**: 앱 실행 시 FCM 토큰을 자동 발급받아 DB(`UserDeviceToken`)에 저장 및 관리
   - **이벤트 기반 알림**: 예약 접수/변경 및 실시간 채팅 메시지 수신 시 관련 사용자에게 즉시 알림 발송
   - **확장성 확보**: 다중 기기 로그인 지원 및 플랫폼별(Android/iOS/Web) 토큰 관리 구조 마련

2. **프로필 이미지 스토리지 최적화 (S3 연동)**
   - **AWS S3 기반 이미지 저장**: 프로필 및 자격증 이미지를 S3 버킷에 저장하고, DB에는 URL만 저장
   - **DB 용량 최적화 및 보안 강화**: Base64 저장 방식 탈피 및 IAM 기반 보안 접근 제어

3. **회원가입 & 인증 및 한의사 관리**
   - 이메일 기반 회원가입, JWT 세션 관리, 비밀번호 재설정
   - 한의사 인증 프로세스 및 관리자 대시보드(승인/거부) 구현

4. **한의사 찾기 & 예약 시스템**
   - 위치 기반 검색, 주소 시스템 고도화(네이버 지도 API), 예약 생성/수정/취소 기능

5. **실시간 채팅 및 예약 연동**
   - WebSocket 채팅, 예약 시 채팅방 자동 생성 및 상태 동기화

---

## 🔴 긴급 개선 필요 사항

### 1. **"생활" 탭 콘텐츠 구현**
**현재 상태**: "Coming Soon" 상태
**개선 계획**:
- 사용자 맞춤형 한의학 건강 정보 피드 제공
- 간단한 건강 일기 또는 증상 기록 기능 추가

### 2. **진료 기록 관리 UI 고도화**
**현재 상태**: 기본적인 CRUD만 가능
**개선 계획**:
- 진료 기록을 타임라인 형태로 시각화
- 처방전 및 소견서를 보기 좋게 출력하는 기능

---

## 🟡 중요 개선 사항

### 3. **환자 관리(가족 추가) 기능**
**현재 상태**: 홈 화면에 UI 요소만 존재
**개선 계획**:
- 한 계정에서 여러 명(본인, 부모님, 자녀 등)의 환자 프로필을 관리할 수 있는 모델 구축
- 예약 시 진료받을 환자를 선택하는 프로세스 추가

### 4. **리뷰 및 평점 시스템**
**현재 상태**: 기능 없음
**개선 계획**:
- 진료 완료 후 환자가 한의사에 대한 리뷰 및 평점을 남기는 기능
- 한의사 찾기 목록에서 평점 순 정렬 필터 추가

### 5. **결제 시스템 도입**
**현재 상태**: 비용 안내만 표시됨
**개선 계획**:
- 토스페이먼츠 등 국내 결제 게이트웨이(PG) 연동
- 예약 시 선결제 또는 진료 후 결제 프로세스 확립

---

## 📊 우선순위별 작업 계획

### Phase 1: 안정화 및 최적화 (진행 중)
1. **프로필/자격증 이미지 외부 스토리지 이전** (✅ 완료 - ver1.3.9.5)
2. **FCM 기반 푸시 알림 시스템 구축** (✅ 완료 - ver1.3.9.6)
3. **"생활" 탭 콘텐츠 구현** (🔴 다음 목표)
4. **진료 기록 관리 UI 고도화**

### Phase 2: 기능 확장 (2-3주)
5. **리뷰 및 평점 시스템 구현**
6. **환자(가족) 관리 기능 완성**

### Phase 3: 상용화 준비 (3-4주)
7. **결제 시스템 연동**
8. **건강보험 적용 로직 검토**
9. **약관 및 고객지원 센터 구축**

---

## 📝 참고 사항 (ver1.3.9.6 변경점 반영)
- 알림 시스템 구현으로 사용자 간의 실시간 상호작용(예약, 채팅) 경험이 크게 향상되었습니다.
- **다음 작업 우선순위**: 앱의 체류 시간을 늘리고 유용한 정보를 제공하기 위해 **"생활" 탭 콘텐츠**를 구현합니다.
